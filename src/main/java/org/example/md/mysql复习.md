### MySQL 的存储引擎有哪些？它们之间有什么区别？

- InnoDB
- MyISAM
- Memory(数据存储再内存中)
- NDB(大规模分布式应用)
- ...

首先在MySQL5.5.5之后存储引擎默认为InnoDB。

InnoDB 与 MyISAM 的区别

1. **InnoDB支持事务，MyISAM不支持** <br>
   因为第一点特性，MyISAM不适合高并发场景，比较适合查询和插入为主的应用。<br>
   所以:
    - MyISAM适合OLAP(Online AnalyticalProcessing-联机分析处理)，例如数据仓库，博客等。 <br>
    - InnoDB适合OLTP(Online Transaction Processing-联机事务处理)，例如电商，银行等。
2. **InnoDB支持外键，MyISAM不支持** <br>
   因为外键性能较差，所以一般项目不会使用外键，而是使用业务逻辑代码做限制。
3. **InnoDB支持行级锁，MyISAM支持表级锁** <br>
    - InnoDB在没有使用主键作为where条件时，也会锁全表。
4. MyISAM的数据和索引是分开存储的，索引也是压缩的 <br>
    - 他们的索引都是B+树，InnoDB的B+树的叶子节点存储了完整的行数据，MyISAM的索引和数据是分开存储的

### MySQL InnoDB 引擎中的聚簇索引和非聚簇索引有什么区别？

**聚簇索引**

- 表中聚簇索引只能有一个，一般为主键索引
- 主键索引的叶子节点存储了完整的行数据
- 适用于范围查找 （叶子节点中存放了所有的数据，且叶子节点之间是通过双向链表连接的）

**非聚簇索引**

- 表中可以有多个非聚簇索引，一般由普通索引和唯一索引组成
- 非聚簇索引的叶子节点存储了*主键*的值以及所在的*列*值
- 适合快速查找特定的列 （索引中存储了列值）

拓展：B+树，在InnoDB中，默认的实现方式为B+树，叶子节点存储了完整的行数据，而MyISAM的B+树叶子节点存储的是数据的地址。<br>

为什么需要使用B+树呢？ <br>
推理过程文章原文：<https://cloud.tencent.com/developer/article/1681803>
推理过程：

1. 当我们查询数据发现查询结果顺序并不是由按照插入顺序决定的，而是根据主键进行了排序。排序的目的是为了当我们根据主键查询时，
   按照顺序查到需要的结果后，不需要继续往后查询了。
2. 执行某个查询SQL不可能把查询记录一条条的使用IO操作，应该一次性把数据全部放进内存中。MySQL在其中引入了**页**，
   数据都存放在页的数据行中，MySQL中一页的大小为16KB。
3. 为了快速找到准确的页，设计了类似**书签**的标记。
   例如：假设每100页数据插入一个标签，当需要查第3456页就知道在第34个标签那。

MySQL 页结构讲解可以看看：
<https://www.bilibili.com/video/BV1pG4y1o7n3/?spm_id_from=333.337.search-card.all.click&vd_source=d40e64c746feefc8c24cdf263d809fa3>

### MySQL的索引类型
从数据结构来看，可以分为：
- B+树索引
  - MySQL默认的索引类型，树型结构，叶子节点双向链表，可以范围查询
- Hash索引
  - 哈希表结构，查询速度快，不支持范围查询，且不存储数据顺序
- R树索引
  - 适用于空间查询，常用于存储GIS系统的空间数据
- 倒排索引
  - 用于存储单词与文档之间的映射关系，可以模糊匹配和关键字搜索

从InnoDB存储引擎的索引类型来看，可以分为：
- 聚簇索引
  - 叶子节点存储了完整的行数据
- 非聚簇索引
  - 叶子节点存储了主键的值以及所在的列值。可以有多个

从索引性质来看，可以分为：
- 主键索引
  - 表中的主键索引只能有一个，不能为null
- 普通索引
  - 索引值可以重复，且可以有多个
- 唯一索引
  - 索引值唯一，但索引值可以有多个null
- 联合索引
  - 多个列组成的索引，联合索引的查询顺序与索引列的顺序有关
- 全文索引
  - 用于全文搜索，适用于对文本内容进行复杂的查询
- 空间索引
  - 适用于多维数据查询，例如区域查询和最近距离查询